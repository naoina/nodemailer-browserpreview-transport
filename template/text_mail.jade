doctype html
html
  head
    meta(charset="UTF-8")
    style.
      .mail-label { text-align: right; color: #999; }
      .mail-table { width: 100%; height: 100%; }
      .mail-body { width: 100%; height: 100%; }
  body
    a(href='html_preview.html') View HTML version
    table.mail-table
      tr
        td.mail-label Subject:
        td= subject
      tr
        td.mail-label From:
        td= from
      tr
        td.mail-label To:
        td= to
      - if (cc)
        tr
          td.mail-label Cc:
          td= cc
      - if (bcc)
        tr
          td.mail-label Bcc:
          td= bcc
      tr
        td.mail-label Attachments:
        td
          each attachment in attachments
            a(href=attachment.path, target="_blank")= attachment.filename
            br
      - if (context)
        tr
          td.mail-label Context:
          td
            div#context(style="display:none;")
              pre= JSON.stringify(context, null, 2)
              a(href="#", onclick="document.querySelector('#context').style = 'display:none;'; document.querySelector('#show').style = ''") (hide)
            a#show(href="#", onclick="document.querySelector('#context').style = ''; document.querySelector('#show').style = 'display:none;'") (show)

      tr
        td
        td &nbsp;
      tr
        td
        td.mail-body
          pre= text
